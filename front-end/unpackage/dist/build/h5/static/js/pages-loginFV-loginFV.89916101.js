(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-loginFV-loginFV"],{"02b2":function(o,e,t){"use strict";var a=t("3964"),n=t.n(a);n.a},3964:function(o,e,t){var a=t("3dbc");"string"===typeof a&&(a=[[o.i,a,""]]),a.locals&&(o.exports=a.locals);var n=t("4f06").default;n("737efdfa",a,!0,{sourceMap:!1,shadowMode:!1})},"3dbc":function(o,e,t){e=o.exports=t("2350")(!1),e.push([o.i,".primay[data-v-59a8e7d0]{width:20%;height:%?80?%;background-color:#007aff;font-size:1em}.username[data-v-59a8e7d0]{width:80%;display:block;padding:0 0 ;background:#fff;border:0;font-size:1em;font-family:Microsoft YaHei;-webkit-box-shadow:#8f9bad 0 0 20px;-moz-box-shadow:#8f9bad 0 0 20px;box-shadow:#8f9bad 0 0 20px;text-align:center}.content[data-v-59a8e7d0]{text-align:center;height:%?400?%;background:#fff}.logo[data-v-59a8e7d0]{height:%?600?%;width:%?400?%;margin-top:%?100?%}.title[data-v-59a8e7d0]{font-size:%?36?%;color:#8f8f94}.username[data-v-59a8e7d0]{width:80%;margin:3%;margin-left:10%}.other_choose[data-v-59a8e7d0]{width:%?80?%;top:90%;position:absolute;margin:0 -3%;height:%?80?%}.submit[data-v-59a8e7d0]{margin-top:%?10?%;width:%?600?%}",""])},"5b28":function(o,e,t){"use strict";t.r(e);var a=t("cd9b"),n=t("6385");for(var s in n)"default"!==s&&function(o){t.d(e,o,function(){return n[o]})}(s);t("02b2");var i=t("2877"),r=Object(i["a"])(n["default"],a["a"],a["b"],!1,null,"59a8e7d0",null);e["default"]=r.exports},6385:function(o,e,t){"use strict";t.r(e);var a=t("c7ef"),n=t.n(a);for(var s in a)"default"!==s&&function(o){t.d(e,o,function(){return a[o]})}(s);e["default"]=n.a},c7ef:function(o,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{pnum:"",imgfile:"",err:""}},methods:{afterRead:function(o){var e=this;this.$toast.loading({duration:0,forbidClick:!0,message:"识别中"}),console.log(o),lrz(o.file,{quality:.7}).then(function(o){console.log(o.base64),e.imgfile=o.base64.slice(23);var a=t("2ed9"),n={method:"POST",uri:"http://101.201.70.76:8080/YueBa/FVerifyServlet",form:{pnum:e.pnum,type:1,content_1:o.base64.slice(23)},headers:{}},s=t("2ed9"),i={method:"POST",uri:"http://101.201.70.76:8080/YueBa/LoginPnumOnlyServlet",form:{pnum:e.pnum,password:e.password},headers:{}};a(n).then(function(o){if(console.log("人脸成功"),console.log(o),"error"!=o){var t=JSON.parse(o);t.confidence>=80?s(i).then(function(o){if(e.$toast.clear(),console.log("手机号"+e.pnum),console.log("密码"+e.password),console.log(o),"error"!=o){var t=JSON.parse(o);console.log(t),console.log("登录成功"),console.log("id"),console.log(t.id),console.log("shop"),console.log(t.shop),e.$cookies.set("pnum",e.pnum,604800),e.$cookies.set("id",t.id,604800),e.$cookies.set("shopid",t.shop,604800),e.loginerr="登录成功",e.$toast.success("登录成功"),"0"==t.shop?e.$router.push({path:"/pages/chooseRole/chooseRole"}):e.$router.push({path:"/pages/logout/logout"})}else e.$toast.clear(),console.log("用户名或密码错误"),e.$toast.fail("登录失败，请检查网络连接"),e.loginerr="用户名或密码错误"}).catch(function(o){e.$toast.clear(),e.$toast.fail("登录失败，请检查网络连接"),console.log("败亡"),console.error(o)}):e.$toast.fail("非本人")}}).catch(function(o){e.$toast.clear(),e.err=o,e.$toast.fail("识别失败，请重新识别"),console.log("人脸败亡")})}).catch(function(o){console.log(o)})},toRegister:function(){this.$router.push({path:"/pages/index/register"})}}};e.default=a},cd9b:function(o,e,t){"use strict";var a=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"content"},[t("v-uni-image",{staticClass:"logo",attrs:{src:"/static/logo1.png"}}),t("van-cell-group",{staticClass:"username"},[t("van-field",{attrs:{required:"",clearable:"",label:"手机号","right-icon":"question-o",placeholder:"请输入用户名",rows:"1",autosize:""},on:{"click-right-icon":function(e){e=o.$handleEvent(e),o.$toast("请按正确格式输入手机号")}},model:{value:o.pnum,callback:function(e){o.pnum=e},expression:"pnum"}})],1),t("van-uploader",{attrs:{"after-read":o.afterRead}},[t("van-button",{staticClass:"submit",attrs:{icon:"photo",type:"primary",size:"large"}},[o._v("人脸识别登录")])],1),t("van-button",{staticClass:"submit",attrs:{plain:"",hairline:"",size:"large",type:"primary"},on:{click:function(e){e=o.$handleEvent(e),o.toRegister(e)}}},[o._v("立刻注册")])],1)},n=[];t.d(e,"a",function(){return a}),t.d(e,"b",function(){return n})}}]);